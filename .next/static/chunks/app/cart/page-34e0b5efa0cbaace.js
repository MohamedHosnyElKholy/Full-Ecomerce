(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1565],{85457:function(e,t,r){Promise.resolve().then(r.bind(r,68229))},68229:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var o=r(57437),a=r(2265),s=r(68575),d=r(85258),n=r(11827),i=r(46387),l=r(35301),c=r(94013),u=r(67208),x=r(45841),m=r(36137),p=r(59832),f=r(35389),h=r(27648),g=r(29886),v=r(10965),j=r(75186);function C(){var e,t,r,C;let[y,Z]=(0,a.useState)({}),[k,b]=(0,a.useState)({}),w=(0,s.I0)(),{products:S}=(0,s.v9)(e=>e.cart),P=(null==S?void 0:null===(t=S.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.products)||[];console.log(P),(0,a.useEffect)(()=>{w((0,d.NY)())},[w]);let I=async e=>{b(t=>({...t,[e]:!0}));try{await w((0,d.Z)(e)),await w((0,d.NY)())}catch(e){console.error("Error removing product from cart:",e),j.Am.error("Failed to remove product from cart.")}finally{b(t=>({...t,[e]:!1}))}},A=async(e,t)=>{try{Z(t=>({...t,[e]:!0})),await w((0,d.xu)({id:e,count:t})),await w((0,d.NY)())}catch(e){console.error("Error updating cart:",e),j.Am.error("Failed to update cart.")}finally{Z(t=>({...t,[e]:!1}))}};return(0,o.jsxs)(n.default,{sx:{mt:{xs:2,sm:4}},children:[(0,o.jsx)(i.default,{variant:"h4",sx:{mb:{xs:2,sm:3}},children:"Your Cart"}),0===P.length?(0,o.jsx)(l.default,{sx:{textAlign:"center",mt:4},children:(0,o.jsx)(i.default,{variant:"h6",color:"text.secondary",children:"Your cart is empty. Please add some products!"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.default,{sx:{mt:4,textAlign:{xs:"center",sm:"right"}},children:[(0,o.jsx)(i.default,{variant:"h5",sx:{mb:1,fontWeight:"bold",color:"#333",fontSize:{xs:"20px",sm:"24px"}},children:"Total Price:"}),(0,o.jsxs)(i.default,{variant:"h5",sx:{color:"#DB4444",fontSize:{xs:"22px",sm:"28px"}},children:["$",null==S?void 0:null===(C=S.data)||void 0===C?void 0:null===(r=C.data)||void 0===r?void 0:r.totalCartPrice]})]}),(0,o.jsx)(l.default,{sx:{textAlign:{xs:"center",sm:"right"},mb:2,mt:{xs:1,sm:0}},children:(0,o.jsx)(c.Z,{variant:"outlined",color:"error",onClick:()=>{w((0,d.LL)()).then(()=>w((0,d.NY)()))},sx:{px:{xs:2,sm:3},py:{xs:1,sm:1.5}},children:"Clear Cart"})}),(0,o.jsx)(l.default,{sx:{display:"flex",flexDirection:"column",gap:2},children:P.map(e=>{var t,r,a,s,d,n,h,j;return(0,o.jsxs)(u.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center",sm:"flex-start"},p:2},children:[(0,o.jsx)(x.Z,{component:"img",sx:{width:{xs:"100%",sm:100},height:{xs:"auto",sm:100},objectFit:"cover",borderRadius:2,mb:{xs:2,sm:0},mr:{sm:2}},image:null===(t=e.product)||void 0===t?void 0:t.imageCover,alt:null===(r=e.product)||void 0===r?void 0:r.title}),(0,o.jsxs)(m.Z,{sx:{flex:"1 0 auto",textAlign:{xs:"center",sm:"left"}},children:[(0,o.jsx)(i.default,{variant:"h6",sx:{fontWeight:600},children:null===(a=e.product)||void 0===a?void 0:a.title}),(0,o.jsxs)(i.default,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Price: $",null==e?void 0:e.price]}),(0,o.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:{xs:"center",sm:"flex-start"},gap:1},children:[(0,o.jsx)(p.Z,{onClick:()=>{var t;return A(null===(t=e.product)||void 0===t?void 0:t.id,e.count-1)},disabled:y[null===(s=e.product)||void 0===s?void 0:s.id]||e.count<=1,sx:{p:{xs:.5,sm:1}},children:(0,o.jsx)(v.Z,{})}),(0,o.jsx)(i.default,{sx:{mx:1,fontSize:{xs:"16px",sm:"18px"}},children:y[null===(d=e.product)||void 0===d?void 0:d.id]?(0,o.jsx)(f.Z,{size:24,sx:{color:"#ccc"}}):e.count}),(0,o.jsx)(p.Z,{onClick:()=>{var t;return A(null===(t=e.product)||void 0===t?void 0:t.id,e.count+1)},disabled:y[null===(n=e.product)||void 0===n?void 0:n.id],sx:{p:{xs:.5,sm:1}},children:(0,o.jsx)(g.Z,{})})]})]}),(0,o.jsx)(l.default,{sx:{display:"flex",flexDirection:{xs:"row",sm:"column"},justifyContent:{xs:"center",sm:"center"},alignItems:{xs:"center",sm:"flex-end"},ml:{sm:2},mt:{xs:2,sm:0}},children:(0,o.jsx)(c.Z,{variant:"contained",color:"secondary",onClick:()=>{var t;return I(null===(t=e.product)||void 0===t?void 0:t.id)},sx:{minWidth:{xs:"100px",sm:"auto"},px:{xs:2,sm:3},py:{xs:1,sm:1.5}},children:k[null===(h=e.product)||void 0===h?void 0:h.id]?(0,o.jsx)(f.Z,{size:24,sx:{color:"#fff"}}):"Remove"})})]},null===(j=e.product)||void 0===j?void 0:j.id)})}),(0,o.jsx)(l.default,{sx:{textAlign:{xs:"center",sm:"right"},mt:4,mb:4},children:(0,o.jsx)(h.default,{href:"/cheakOut",style:{textDecoration:"none"},children:(0,o.jsx)(c.Z,{variant:"contained",color:"primary",sx:{backgroundColor:"#DB4444",color:"#fff",px:{xs:3,sm:4},py:{xs:1.5,sm:2},borderRadius:"4px","&:hover":{backgroundColor:"#c03939"}},children:"Check Out"})})})]})]})}},85258:function(e,t,r){"use strict";r.d(t,{LL:function(){return l},NY:function(){return d},Vx:function(){return c},Z:function(){return i},Z5:function(){return s},xu:function(){return n}});var o=r(1455),a=r(83464);let s=(0,o.hg)("addWishList/fetchProducts",async e=>{let t=localStorage.getItem("token");return await a.Z.post("https://ecommerce.routemisr.com/api/v1/cart",{productId:"".concat(e)},{headers:{token:t}})}),d=(0,o.hg)("getWishLits/fetchProducts",async()=>{let e=localStorage.getItem("token");return await a.Z.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:{token:e}})}),n=(0,o.hg)("updateCart/fetchProducts",async e=>{let{id:t,count:r}=e,o=localStorage.getItem("token");return await a.Z.put("https://ecommerce.routemisr.com/api/v1/cart/".concat(t),{count:r},{headers:{token:o}})}),i=(0,o.hg)("removeproductSlice/fetchProducts",async e=>{let t=localStorage.getItem("token");return await a.Z.delete("https://ecommerce.routemisr.com/api/v1/cart/".concat(e),{headers:{token:t}})}),l=(0,o.hg)("clearCart/fetchProducts",async()=>{let e=localStorage.getItem("token");return await a.Z.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:{token:e}})}),c=(0,o.hg)("cheakOut/fetchProducts",async e=>{let{cartId:t,url:r,formdData:o}=e,s=localStorage.getItem("token");return await a.Z.post("https://ecommerce.routemisr.com/api/v1/orders/checkout-session/".concat(t,"?url=").concat(r),{shippingAddress:o},{headers:{token:s}})}),u=(0,o.oM)({name:"addWishList",initialState:{products:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(d.pending,e=>{e.loading=!0}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}).addCase(d.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(n.pending,e=>{e.loading=!0}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}).addCase(n.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(i.pending,e=>{e.loading=!0}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(l.pending,e=>{e.loading=!0}).addCase(l.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}).addCase(l.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message}).addCase(c.pending,e=>{e.loading=!0}).addCase(c.fulfilled,(e,t)=>{e.loading=!1,e.products=t.payload}).addCase(c.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message})}}),{}=u.actions;t.ZP=u.reducer}},function(e){e.O(0,[2149,2276,3464,4013,8575,5186,7648,1455,7981,8422,2971,2117,1744],function(){return e(e.s=85457)}),_N_E=e.O()}]);